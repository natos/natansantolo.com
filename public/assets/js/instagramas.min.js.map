{"version":3,"sources":["?","../src/instagramas.js"],"names":["exports","global","$w","window","$d","document","API_PREFIX","data","data-show-tags","attributeName","defaultValue","data-show-tags-count","data-show-likes","data-render-type","data-count","maxValue","placeholderSize","thumbnail","low_resolution","standard_resolution","template","tag","HTMLElement","_","c","o","i","length","createElement","new","e","cloneNode","isBoolean","b","valueOf","count","done","serialize","obj","prefix","str","p","hasOwnProperty","k","v","push","encodeURIComponent","join","load","url","script","src","async","onload","onreadystatechange","this","readyState","parentNode","removeChild","getElementsByTagName","appendChild","get","params","callback","query","fname","Date","response","Instagramas","element","$this","access_token","getAttribute","undefined","removeAttribute","children","childrenLoaded","member","parseInt","source","create","prototype","childLoaded","console","log","ready","setAttribute","success","call","Instagrama","$parent","parent","render","$data","hasData","figure","className","renderType","a","target","drawImage","drawLikes","drawTags","href","link","size","img","style","id","caption","text","images","apply","arguments","showLikes","likes","likescaption","innerHTML","showTags","tagscaption","tags","t","showTagsCount","replace","context","_r","f","test","setTimeout","instagramas","querySelectorAll","namespace","_instagramas_namespace","collection","start"],"mappings":"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","file":"instagramas.js","sourcesContent":[null,"/*!\n * Instagrams.js\n *\n * Renders latest instagramas\n */\n\n// (function($w, $d) {\n\n    var $w = window,\n        $d = document;\n\n    // 'use strict';\n\n    var API_PREFIX = 'https://api.instagram.com/v1/users/self/media/recent/?';\n\n    /**\n     * Default properties and values\n     * @private @const data\n     */\n    var data = {\n        'data-show-tags': {\n            attributeName: 'showTags',\n            defaultValue: false\n        },\n        'data-show-tags-count': {\n            attributeName: 'showTagsCount',\n            defaultValue: 1\n        },\n        'data-show-likes': {\n            attributeName: 'showLikes',\n            defaultValue: false\n        },\n        'data-render-type': {\n            attributeName: 'renderType',\n            defaultValue: 'thumbnail'\n        },\n        'data-count': {\n            attributeName: 'count',\n            defaultValue: 5,\n            maxValue: 20\n        }\n    };\n\n    var placeholderSize = {\n      \"thumbnail\": \"150\",\n      \"low_resolution\": \"320\",\n      \"standard_resolution\": \"640\"\n    };\n\n    /**\n     * Templates map\n     * @private @const template\n     */\n    var template = {\n        'tag': '<span class=\"instagrama-tag\">{{tag}}</span>'\n    };\n\n    /**\n     * DOM elements cache\n     * @private @const elements\n     */\n    var HTMLElement = {\n        _: (function(c) {\n            var o = {};\n            for (var i = 0; i < c.length; i += 1) {\n                o[c[i]] = $d.createElement(c[i]);\n            }\n            return o;\n        }(['div', 'figure', 'figcaption', 'img', 'a'])),\n        new: function(e) {\n            return HTMLElement._[e].cloneNode(false);\n        }\n    };\n\n    /**\n     * Returns if a variable is a boolean\n     * @private @function isBoolean\n     * @return {boolean} true if the passed variable is boolean\n     */\n    function isBoolean(b) {\n        return typeof b === 'boolean' || (typeof b === 'object' && typeof b.valueOf() === 'boolean');\n    }\n\n    var count = 0, done = 0;\n\n    function serialize(obj, prefix) {\n        var str = [];\n        for(var p in obj) {\n            if (obj.hasOwnProperty(p)) {\n                var k = prefix ? prefix + \"[\" + p + \"]\" : p, v = obj[p];\n                str.push(typeof v == \"object\" ?\n                    serialize(v, k) :\n                    encodeURIComponent(k) + \"=\" + encodeURIComponent(v));\n            }\n        }\n        return str.join(\"&\");\n    }\n\n    function load(url) {\n        var script = document.createElement('script'),\n        done = 0;\n        script.src = url;\n        script.async = true;\n        script.onload = script.onreadystatechange = function() {\n            if (!done && (!this.readyState || this.readyState === \"loaded\" || this.readyState === \"complete\")) {\n                done = true;\n                script.onload = script.onreadystatechange = null;\n                if ( script && script.parentNode ) {\n                    script.parentNode.removeChild( script );\n                }\n            }\n        };\n        document.getElementsByTagName('head')[0].appendChild(script);\n    }\n\n    function get(url, params, callback) {\n        var query = '';\n        if (typeof params === 'function' && typeof callback === 'undefined') {\n            callback = params;\n        } else {\n            query = serialize(params);\n        }\n        count += 1;\n        var fname = 'phealer' + '_' + new Date().valueOf() + count;\n        window[fname] = function (response) {\n            callback && callback(response);\n            try {\n                delete window[fname];\n            } catch (e) {}\n            window[fname] = null;\n        }\n        load(url + query + \"&amp;callback=\" + fname);\n    }\n\n    /**\n     * Creates a gallery of Instagramas using a valid Instagram access token\n     * @private @class Instagramas\n     * @param {HTMLElement} element - Placeholder element for Instagramas gallery\n     */\n    var Instagramas = function(element) {\n\n        var $this = this;\n        var access_token = element.getAttribute('data-access-token');\n\n        if (access_token === undefined || access_token === null) {\n            throw (\"Instagramas missing access token: Instagramas needs access token to fetch information from instragram.\");\n        } else {\n            element.removeAttribute('data-access-token');\n        }\n\n        $this.element = element;\n        $this.children = [];\n        $this.childrenLoaded = 1;\n\n        for (var member in data) {\n            $this[data[member].attributeName] = (isBoolean(data[member].defaultValue)) ?\n            element.getAttribute(member) === \"true\" || data[member].defaultValue :\n                element.getAttribute(member) || data[member].defaultValue;\n        }\n\n        // make sure count is a number and don't exceeds max\n        $this.count = parseInt($this.count > data['data-count'].maxValue? data['data-count'].maxValue: $this.count, 10);\n\n        var source = API_PREFIX + 'count=' + $this.count + '&amp;' + 'access_token=' + access_token;\n\n        $this\n          .create()\n          .get(source, $this.create)\n    };\n\n    /**\n     * @public @method childLoaded\n     * @return this\n     */\n    Instagramas.prototype.childLoaded = function() {\n        var $this = this;\n        console.log('childLoaded', typeof $this.childrenLoaded, $this.childrenLoaded, 'this.count', typeof $this.count, $this.count)\n        if ($this.count === $this.childrenLoaded) {\n          console.log('done! childrenLoaded for ', $this);\n            $this.childrenLoaded = null;\n            delete $this.childrenLoaded;\n            return $this.ready();\n        }\n        $this.childrenLoaded += 1;\n        return $this;\n    };\n    /**\n     * @public @method ready\n     * @return this\n     */\n    Instagramas.prototype.ready = function() {\n      this.element.setAttribute('data-state', 'ready');\n      return this;\n    };\n\n    /**\n     * Gets from the provided source though JSONP and executes the callback\n     * @public @method get\n     * @param {string} source - URL of the source of content\n     * @return {object} this\n     */\n    Instagramas.prototype.get = function(source, callback) {\n      var $this = this;\n      $this.element.setAttribute('data-state', 'get:in-progress');\n      // TODO: Handle error cases\n      function success(response) {\n        $this.element.setAttribute('data-state', 'get:success');\n        callback.call($this, response);\n      }\n      get(source, success);\n      return $this;\n    };\n\n    /**\n     * Creates the gallery for content\n     * @public @method create\n     */\n    Instagramas.prototype.create = function(response) {\n      var i;\n      for (i = 0; i < this.count; i += 1) {\n        var data = response && response.data && response.data[i];\n        if (this.children[i] && data) {\n          this.children[i].load(data);\n        } else {\n          this.children.push(new Instagrama(this));\n        }\n      }\n      this.element.setAttribute('data-state', 'created');\n      return this;\n    };\n\n\n    /**\n     * Creates a single Instagram picture\n     * @private @class Instagrama\n     * @return {object} $this - Instagrama instance\n     */\n    var Instagrama = function($parent) {\n\n        if (!$parent) {\n            return this;\n        }\n\n        this.parent = $parent;\n        this.element = {};\n        this.render();\n\n        return this;\n    };\n\n    /**\n     * Load the content of the picture\n     * @public @method load\n     * @param {object} $data - Object that describe a picture from Instragram's API Response.\n     * @return {object} $this - Instagrama instance\n     */\n    Instagrama.prototype.load = function($data) {\n\n      if (!$data) {\n          return this;\n      }\n\n      this.data = $data;\n      this.render();\n\n      return this;\n    }\n\n    /**\n     * Returns data is it has data\n     * @public @method hasData\n     * @return {object} $this - Instagrama instance\n     */\n    Instagrama.prototype.hasData = function() {\n      return typeof this.data !== 'undefined' && this.data;\n    };\n\n    /**\n     * Renders the picture placeholder\n     * @public @method render\n     * @return {object} $this - Instagrama instance\n     */\n    Instagrama.prototype.render = function() {\n\n      var $this = this;\n\n      if (!$this.element.figure) {\n        $this.element.figure = HTMLElement.new('figure');\n        $this.element.figure.className = 'instagrama-' + $this.parent.renderType;\n        $this.element.a = HTMLElement.new('a');\n        $this.element.a.target = '_blank';\n        $this.element.a.className = 'instagrama';\n        $this.element.figure.appendChild($this.element.a);\n      }\n\n      $this\n        .drawImage()\n        .drawLikes()\n        .drawTags();\n\n      $this.parent.element.appendChild($this.element.figure);\n\n      if ($this.hasData()) {\n        $this.element.a.href = $this.data.link;\n      }\n\n      return $this;\n    };\n\n    /**\n     * Renders image content\n     * @private @method drawImage\n     */\n    Instagrama.prototype.drawImage = function() {\n      var $this = this,\n          size = 0;\n\n      if (!$this.element.img) {\n        $this.element.img = HTMLElement.new('img');\n        $this.element.img.className = 'placeholder';\n        size = placeholderSize[$this.parent.renderType];\n        if (size) {\n          $this.element.img.style = [\"width:\", size, \"px;height:\", size, \"px;\"].join();\n        }\n        $this.element.a.appendChild($this.element.img);\n      }\n\n      if ($this.hasData()) {\n        $this.element.img.setAttribute('id', 'i' + $this.data.id);\n        $this.element.img.setAttribute('alt', $this.data.caption.text);\n        $this.element.img.setAttribute('src', $this.data.images[$this.parent.renderType].url);\n        $this.element.img.onload = function() {\n          $this.parent.childLoaded.apply($this.parent, arguments);\n        };\n      }\n\n      return $this;\n    };\n\n    /**\n     * Renders likes\n     * @private @method drawLikes\n     */\n    Instagrama.prototype.drawLikes = function() {\n\n      if (!this.parent.showLikes) { return this; }\n\n      var $this = this,\n          likes = 0;\n\n      if (!$this.element.likescaption) {\n        $this.element.likescaption = HTMLElement.new('figcaption');\n        $this.element.likescaption.className = 'instagrama-likes';\n        $this.element.a.appendChild($this.element.likescaption);\n      }\n\n      if ($this.hasData()) {\n        $this.element.likescaption.innerHTML = $this.data.likes.count;\n      }\n\n      return $this;\n    };\n\n    /**\n     * Renders tags\n     * @private @method drawTags\n     */\n    Instagrama.prototype.drawTags = function() {\n\n      if (!this.parent.showTags) { return this; }\n\n      var $this = this;\n\n      if (!$this.element.tagscaption) {\n        $this.element.tagscaption = HTMLElement.new('figcaption');\n        $this.element.tagscaption.className = 'instagrama-tags';\n        $this.element.a.appendChild($this.element.tagscaption);\n      }\n\n      if ($this.hasData()) {\n        var tags = '',\n            i, t = $this.parent.showTagsCount || $this.data.tags.length;\n\n        for (i = 0; i < t; i += 1) {\n          if (!$this.data.tags[i]) { continue; }\n          tags += template.tag.replace('{{tag}}', $this.data.tags[i]);\n        }\n\n        $this.element.tagscaption.innerHTML = tags;\n      }\n\n      return $this;\n    };\n\n    var context = this;\n    /**\n     * @param {function} f The function to execute when the DOM is ready\n     */\n    function _r(f) {\n        /in/.test(document.readyState)?\n            setTimeout(function() { _r.call(context, f) },9):\n            f.call(context)\n    }\n    /*\n    * @private\n    * Will find all instances of instagramas in the document\n    */\n    var instagramas = $d.querySelectorAll('.instagramas');\n    if (instagramas !== undefined || instagramas !== null) {\n        /**\n        * @private\n        * Instagramas namespace can be predefined by setting a string in the global\n        * variable `_instagramas_namespace` with the name of your choosing, otherwise\n        * will automatically use the defautl value `_Instagramas`.\n        */\n        var namespace = $w._instagramas_namespace || '_Instagramas';\n        $w._instagramas_namespace = namespace;\n\n        /**\n        * @public\n        * Define the namespace to store instagramas instances.\n        */\n        $w[namespace] = {\n            collection: []\n        };\n\n        /*\n        * Start, when DOM ready, create a Instagramas instance for each match.\n        */\n        _r(function start() {\n            for (var i = 0; i < instagramas.length; i += 1) {\n                $w[namespace].collection.push(new Instagramas(instagramas[i]));\n            }\n        });\n    }\n\n// }(window, document));\n"]}